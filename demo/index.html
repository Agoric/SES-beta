<html>
  <header>
    <script src="../dist/evaluator-shim.umd.js"></script>
    <style>
      body { font-family: sans-serif; }
      textarea { font-family: monospace; }
    </style>
  </header>
  <body>
    <h1>Evaluator Shim</h1>
    <p>This demo allows you to evaluate code inside a brand new Evaluator:</p>

    <label>Input:</label>
    <br/>
    <textarea id="input" rows="25" cols="80">
/**
 * Evaluators enhance security by providing execution contexts
 * with restricted authority. This example shows two evaluators
 * executing the same code with different globals. They are isolated 
 * from each other and from their parent execution context.
 */
const e1 = new Evaluator();
const e2 = new Evaluator();

const src = '({x, y: typeof y, z: typeof z})';
const z = 1;
const r1 = e1.evaluate(src, { x: 2, y: 2 });
const r2 = e2.evaluate(src, { x: 3 });

/**
 * x has a different value in e1 and e2
 * y is only defined in e1
 * z is undefined in e1 and e2
 */
({ r1, r2 })
        
    </textarea>
    <br />

    <button id="run">Evaluate</button>
    <button id="reset">Reset</button>
    <br />

    <label>Output:<label/>
      <br/>
    <textarea id="output" readonly rows="15" cols="80"></textarea>

    <p>
      <small>
        Note: you can look in the console to inspect the original output of the evaluation.
      </small>
    </p>
    <script src="demo.js"></script>
  </body>
</html>
